{"version":3,"file":"main.mjs","sources":["../../src/modules/log.js","../../src/helpers/utils.js","../../src/main.js"],"sourcesContent":["function writeLog(str) {\n    process.stdout.write(str);\n    process.stdout.write('\\n');\n}\n\nexport { writeLog };\n","import chalk from 'chalk';\nimport { writeLog } from '../modules/log.js';\n\nfunction isKey (str) {\n    if (!typeof str === 'undefined' || str === null) {\n        writeLog(\n            chalk.yellowBright(\n                'Invalid value for param \"str\"',\n            ),\n        );\n    }\n    return str && str.startsWith('-');\n}\n\nfunction isCompact (str) {\n    return str && str.indexOf('=') > -1;\n}\n\nfunction getKey (str) {\n    if (typeof str === 'undefined' || str === null) {\n        writeLog(\n            chalk.yellowBright(\n                'Invalid value for param \"str\"',\n            ),\n        );\n        return;\n    }\n    const index = str.indexOf('=');\n    return index > -1\n        ? str.slice(0, index).replace(/^-+/g, '')\n        : str.replace(/^-+/g, '');\n}\n\nfunction getValue(str) {\n    if (typeof str === 'undefined' || str === null) {\n        writeLog(\n            chalk.yellowBright(\n                'Invalid value for param \"str\"',\n            ),\n        );\n        return;\n    }\n    const index = str.indexOf('=');\n    return str.slice(index + 1, str.length);\n}\n\nfunction parseValue (value) {\n    value.forEach((val, index) => {\n        if (!isNaN(parseInt(val, 10))) {\n            value[index] = parseInt(val);\n            return;\n        }\n\n        if (['true' || 'false'].includes(val)) {\n            value[index] = Boolean(val.replace('false', ''));\n        }\n    });\n\n    return value;\n}\n\nexport const utils = {\n    getKey,\n    getValue,\n    isKey,\n    isCompact,\n    parseValue,\n};\n","import { readFileSync } from 'node:fs';\nimport chalk from 'chalk';\nimport { writeLog } from './modules/log.js';\nimport { utils } from './helpers/utils.js';\nimport { join as pathJoin } from 'node:path';\n\nfunction readMapping() {\n    try {\n        const data = readFileSync(\n            pathJoin(process.cwd(), '/config/arguments-parser.json'),\n            { flag: 'r', encoding: 'utf8' },\n        );\n        return data ? JSON.parse(data) : null;\n    } catch (err) {\n        writeLog(\n            `${chalk.cyan(chalk.yellow('Warning: '))}${chalk.blueBright(\n                'arguments-parser',\n            )} not configured.`,\n        );\n        writeLog(\n            `Please create ${chalk.blueBright('arguments-parser.json')} inside ${chalk.blueBright('config')} folder in project root folder.`,\n        );\n        writeLog(\n            `Otherwise if you don't want to configure it, please set ${chalk.blueBright(\n                'explicit',\n            )} property to false in main configuration.\\n`,\n        );\n\n        return null;\n    }\n}\n\nconst processArgs = (config) => {\n    const args = process.argv.slice(config.offset ? config.offset : 2);\n\n    // raw params array\n    if (config.onlyParamsArray) {\n        return args;\n    }\n\n    const processed = {};\n\n    let actualArg;\n\n    while (args[0] && args[0].length) {\n        if (utils.isKey(args[0])) {\n            actualArg = args.shift();\n\n            if (utils.isCompact(actualArg)) {\n                const val = utils.getValue(actualArg);\n                actualArg = utils.getKey(actualArg);\n                processed[actualArg] = [];\n                processed[actualArg].push(val);\n            } else {\n                actualArg = utils.getKey(actualArg);\n                processed[actualArg] = [];\n            }\n\n        } else {\n            const actualValue = args.shift();\n\n            if (typeof processed[actualArg] === 'undefined') {\n                processed[actualArg] = [];\n            }\n\n            processed[actualArg].push(actualValue);\n        }\n    }\n\n    for (const key of Object.keys(processed)) {\n        processed[key] = utils.parseValue(processed[key]);\n\n        if (processed[key].length === 0) {\n            processed[key].push(true);\n        }\n\n        if (!config.keepAsArray) {\n            if (processed[key].length === 1) {\n                processed[key] = processed[key][0];\n            }\n        }\n    }\n\n    return processed;\n};\n\nfunction argumentsParser(config = {}) {\n    const args = processArgs(config);\n\n    if (config.onlyParamsArray) {\n        return args;\n    }\n\n    const mapping = config && config.explicit ? readMapping() : null;\n    let result = {};\n\n    if (mapping) {\n        for (const map of mapping) {\n            let key;\n            if (Array.isArray(map)) {\n                const baseKey = utils.getKey(map[0]);\n\n                for (const intKey of map) {\n                    key = utils.getKey(intKey);\n                    const keyValue = args[key];\n                    if (typeof keyValue !== 'undefined') {\n                        result[baseKey] = keyValue;\n                    }\n                }\n                // establecer el base\n                const keyValue = args[baseKey];\n                if (typeof keyValue !== 'undefined') {\n                    result[baseKey] = keyValue;\n                }\n            } else if (typeof map === 'string') {\n                key = utils.getKey(map);\n                const keyValue = args[key];\n\n                if (typeof keyValue !== 'undefined') {\n                    result[key] = keyValue;\n                }\n            }\n        }\n    } else {\n        result = args;\n    }\n    return result;\n}\n\nexport default argumentsParser;\n"],"names":["pathJoin"],"mappings":"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"}